$(document).ready(function() {
    $('#rankConverterForm').submit(function(event) {
        var gen_rank = parseInt(document.getElementById("inputGeneralRank").value);
    
        var obc = [[0, 0], [5, 15], [2279, 10536], [2332, 10752], [2608, 11844], [2773, 12478], [2972, 13167], [3374, 14652], [3402, 14756], [3918, 16639], [4222, 17726], [5122, 20996], [5925, 23751], [6062, 24235], [6666, 26268], [7112, 27770], [7649, 29631], [7987, 30801], [9463, 35614], [10159, 37908], [10694, 39469], [11057, 40678], [11317, 41562], [12155, 44442], [12419, 45319], [12730, 46495], [14045, 50890], [14452, 52154], [14516, 52331], [14590, 52569], [15897, 56573], [16926, 60019], [17135, 60715], [17468, 61761], [17938, 63288], [18782, 65954], [18869, 66254], [20902, 72793], [21103, 73432], [21347, 74154], [21729, 75529], [21815, 75716], [22018, 76245], [22505, 77843], [22546, 77953], [23080, 79647], [25099, 86184], [27554, 93549], [29142, 98463], [32475, 108635], [32880, 109915], [34833, 115860], [35546, 118096], [38482, 127042], [39090, 128915], [40332, 132645], [44233, 144556], [44320, 144770], [45863, 149416], [47751, 155190], [48340, 156985], [51140, 165317], [51141, 165317], [52602, 169664], [53727, 172949], [54535, 174535], [54689, 174889], [55931, 179866], [59241, 189593], [62376, 198736], [62736, 198729], [64948, 206231], [65410, 207004], [71727, 225480], [72185, 226760], [76043, 237955], [77125, 241055], [77903, 243272], [82942, 257741], [84370, 261850], [85266, 264421], [97610, 299610], [99524, 304538], [105571, 321768], [108410, 329874], [112734, 342064], [113597, 344528], [122744, 369585], [128522, 385433], [128552, 385433], [131849, 394849], [138442, 413698], [243878, 693688], [264745, 746465], [313589, 871721], [315973, 877608], [320706, 889469]]
        var sc = [[0, 0], [5, 210], [1628, 46279], [1840, 51003], [2518, 73388], [4201, 98463], [5503, 114218], [5822, 119217], [7109, 133745], [7109, 137745], [7292, 140291], [7292, 140292], [7541, 143248], [8518, 156775], [9097, 163954], [9160, 164698], [9382, 170382], [9980, 174981], [11760, 197370], [12170, 202754], [12526, 207569], [12927, 212441], [12938, 212534], [13181, 215486], [14316, 229007], [14639, 232628], [15238, 240005], [15835, 247017], [16018, 249126], [16174, 250863], [16651, 256091], [18042, 272577], [21058, 306118], [21079, 306418], [21982, 315782], [22132, 318231], [23205, 328623], [23615, 332881], [25151, 348378], [26453, 361914], [26621, 363552], [27674, 372650], [30157, 400156], [31879, 417312], [33452, 435627], [33721, 435795], [35309, 451910], [43863, 534002], [44682, 542492], [65816, 738071], [66505, 744077]]
        var st = [[0, 0], [5, 1571], [718, 73232], [807, 77947], [1112, 98636], [1276, 107545], [1484, 119233], [2677, 176045], [2781, 181483], [2982, 189630], [5094, 270132], [5466, 288956], [5726, 291455], [6215, 306895], [6960, 331947], [7090, 335626], [7347, 343091], [11441, 456720], [11669, 462794], [13352, 507777]]
        var ews = [[0, 0], [5, 15], [331, 2660], [680, 5542], [2691, 19632], [3493, 24794], [4165, 29397], [5164, 35931], [5581, 38695], [6869, 46834], [6982, 47855], [8168, 55750], [8875, 59577], [9097, 61192], [9250, 63258], [9649, 66170], [10660, 73083], [11119, 76655], [12171, 84181], [12451, 86261], [12638, 87558], [12658, 87715], [12669, 87806], [12739, 88335], [14438, 100978], [15199, 106624], [15422, 108420], [15567, 109613], [15570, 109613], [16036, 113155], [16873, 119433], [17025, 120699], [19160, 138078], [19597, 141442], [19912, 144118], [19951, 144426], [20918, 152537], [22737, 167922], [23544, 174615], [23703, 176045], [24256, 180923], [24361, 181659], [24868, 186354], [27416, 209794], [27709, 212541], [31808, 252077], [33111, 264358], [33825, 271194], [34959, 282671], [36071, 294743], [38614, 320890], [45701, 396961], [51625, 462528], [52708, 477268], [56017, 518720], [58592, 550740], [61738, 592351], [64505, 628714], [66624, 656762], [67005, 662367], [77310, 809742]]
        var rank_obc, rank_sc, rank_st, rank_ews;
    //    document.write(obc[0]);
        var b = 0;
        for(var i = 0; i < obc.length-1 ; i++){
            if ( obc[i][1] <= gen_rank && gen_rank <= obc[i + 1][1] ){
                    rank_obc = (gen_rank - obc[i][1]) * (obc[i + 1][0] - obc[i][0]) / ( obc[i + 1][1] - obc[i][1]) + obc[i][0];
                    b = 1;
                    break;
                    }
            }
        if(b==0){
            rank_obc = (gen_rank - obc[obc.length-1][1]) * (obc[obc.length-1][0] - obc[obc.length-2][0]) / (obc[obc.length-1][1] - obc[obc.length-2][1]) + obc[obc.length-1][0]
            }
        b = 0;
        for(var i = 0; i < sc.length-1 ; i++){
            if ( sc[i][1] <= gen_rank && gen_rank <= sc[i + 1][1] ){
                    rank_sc = (gen_rank - sc[i][1]) * (sc[i + 1][0] - sc[i][0]) / ( sc[i + 1][1] - sc[i][1]) + sc[i][0];
                    b = 1;
                    break;
                    }
            }
        if(b==0){
            rank_sc = (gen_rank - sc[sc.length-1][1]) * (sc[sc.length-1][0] - sc[sc.length-2][0]) / (sc[sc.length-1][1] - sc[sc.length-2][1]) + sc[sc.length-1][0]
            }
        b = 0;
        for(var i = 0; i < st.length-1 ; i++){
            if ( st[i][1] <= gen_rank && gen_rank <= st[i + 1][1] ){
                    rank_st = (gen_rank - st[i][1]) * (st[i + 1][0] - st[i][0]) / ( st[i + 1][1] - st[i][1]) + st[i][0];
                    b = 1;
                    break;
                    }
            }
        if(b==0){
            rank_st = (gen_rank - st[st.length-1][1]) * (st[st.length-1][0] - st[st.length-2][0]) / (st[st.length-1][1] - st[st.length-2][1]) + st[st.length-1][0]
            }
        b = 0;
        for(var i = 0; i < ews.length-1 ; i++){
            if ( ews[i][1] <= gen_rank && gen_rank <= ews[i + 1][1] ){
                    rank_ews = (gen_rank - ews[i][1]) * (ews[i + 1][0] - ews[i][0]) / ( ews[i + 1][1] - ews[i][1]) + ews[i][0];
                    b = 1;
                    break;
                    }
            }
        if(b==0){
            rank_ews = (gen_rank - ews[ews.length-1][1]) * (ews[ews.length-1][0] - ews[ews.length-2][0]) / (ews[ews.length-1][1] - ews[ews.length-2][1]) + ews[ews.length-1][0]
            }
        rank_obc = parseInt(rank_obc);
        rank_ews = parseInt(rank_ews);
        rank_sc = parseInt(rank_sc);
        rank_st = parseInt(rank_st);
    
    
        $('#all_ranks').empty().append('<ul>' + "<li style='color:red;'><strong>OBC: "+ rank_obc +"</strong></li>" + "<li style='color:red;'><strong>EWS: "+ rank_ews +"</strong></li>" + "<li style='color:red;'><strong>SC: "+ rank_sc +"</strong></li>" + "<li style='color:red;'><strong>ST: "+ rank_st +"</strong></li>" + '</ul>');
        $('#all_ranks').append("<p><strong>Important:</strong>this rank predictor works on 2022 data</p>");

      event.preventDefault(); // prevent the default form submission behavior

    });
  });
  
